language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: qou7SsZtI49AFu/NSW9E1wfSObEjuSvXWiZTNMf+ruU8TeXtSqcqhR8jsVZCKNXalek520ogeO0T/5+pBkROFRL/YV0qNfEhmKpWM5AcS9WkRQCrGqmQ+VfUA7MYUl9rbgjaSuf32uppnDVsHIkRI0X3MiwGUuPtu0SmD9obB+Dain1JR0YHu2OWLcQA/hDpy9xitZPOp6NMsgi+Hw6wYJc9b+slRAactqslPoMIpOjBFRCwFOn2Z2v8q2aqeVgMNEftGpltkxaTBF85iyRfIEdCq5GSW3WvtCC4nSzPy3KYRR+/j3wJOXnAMtuXN+XSt3PRU/vF81b1nNi27LfG6VbvyXel/I6uLScMLYVvgvQ0rxBih7GuQSPP0dwab4h0sXxzpXE2dzWxyM2YDJha0Aei+iUajG4LB1ME1ZmssuZstZ2z3u9au4Ld/X/NsRnn7Rq2LM3lcVL3PFwmnqSsDsVxZaVe20htOwlnHkx/QZqFp96Y+PHYlq17+Dpfyw7WzIFIMeGxtE7EtNLe+cS6o24Rp24ClHjnCrL/kUeDSN9E9ZupsE+Hu9QaWRO0xJg99Lu0Zf/hcnb0Dz3E7E37GXbi9zAGf8hsBhHHozKXItIgOk5m9Q9n9H5QdxUTI+e4UsJ1Zxj/WOZHypQWRBA/wQNz1wcNqnbcChv2p9A1JBE=
  - secure: PbuFrMYbIHiGAkG8ELplG/DGVSqMekA235avLpIe3IVVuliCr64fVe7A62vqxJ4GYM1yUh4EhB638BdBwNWTPQkAnsbvgzE/vnlkFliIDSclSN7Hhlj9KIrZ8t2qJbHvhWsVpqFLzdSIkce/U1CSKrDs6P7y9gapXQUpjLNsRwoY31ZrdAmCfGmVCCpCh4xpI40Zz3lIGxXKpIlj6DC/hJr9q56LSUIW/z6ieGYRS//m88GCVmIvBtc4nOC/rDLqtJbxf8mxiJnoWxR8kfSITDnAwQSF9kOaNXESY65gEOBIciaD08mjYV/IytfUjjAgwL2+xDvbrR1YwTuZRcbW2k8DoqeUF7Baqqh1bQMWfdfd5xJsBFOtysj+1Hb74c6NQ7aJYQ15TfY5tf/t27ye6jSE35+nYGbaJKLi3jIhxah/IfHpaILVJM0v9ZtoVonV5B4JpbvRYUe1G8xdPWp+XiUohvXlMiq+7lDKiQ/qOSiEPqolEQbZxwIUEvSa0H4hVymkQtYMYBJxWGz+pwIGCXE9KFxOaqJtHJUa2Yz/F/ZqF/hLdHBuRSVCBQzdb4DVWwysDzPfJhGGhV5qvKreSeIT2VYnY2i7ZK4rOW31VtNfEE6z7OSbqn/OWbUCFlTCDu9mZOZxa6UXBl56vnvh2ZRHU+JZ0/YTLK4VYRjuxIo=
  - secure: rYZ/UOwzKalizgp9lRA9l2uUC+wJWg0iYOZqHccXAOvQrrLmyBuQseyAIhY9w218nk2tYfRpbHiLmaWoqUTPCn6PFsPR8t1TsxYqH2/MyGP5kxHtXOoOPyeqqRE06uro7LlMveybGA4QuAcSAwZG3+Fk/KgBiwYGW8HWlkWpqCez2NQZllIEUUlqqMw58awJqfGs6DlBFjWV6W7w/oo4xo2jxj0HPKhAXHr8sYQEn5Pqv7Y1qBy32ytLUfJ9KfRuQWSgCbRbRmMY9QDT1JblYOHupUstNvtZmoxwYB8SvZbXYq039u0w2dP3oLDs2dNRxmIFzR6Xs+mDrX4AV65XgtCc0Dr4azF621GFTeFLl7+2hpYiGfQmZtw7WEjbkiy29rFwfjm1rS+7u3yqV2eY4aRNRqUnQYg4Y3j1UG1YtP5NvxEbGje/ee3B3r14NaQc9Ft8Bkb5u+DIOOboBlX6XFIqiqxDS2Eu5Kla97RXx3vnhNsmZl3RYQEcMpIUNGFipAlmKBgzDi7s4bBbwBxJslsDSIjPuFjDzoQXWDl35+PDmodFdhGQUTJ3CsPDw/dgc0q4BOTXEwAU/74mn0RFpVKhANBMJBA0Twl0gfcvq+8i+PTRFzUB5WQ8PQzzS+Ma1ceexNNrIKtmUFOpTi9y1VNdv0H5MOo4rRqQ3ZUTL/M=
script:
- ls -alh
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/php-nginx
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: lDlgNY8LgI9WP9lcmDcSRlA+tLMRv3bKkxQgzC9RxCyOVjBjdhicSEFU9fIYQtaW5j8qTCyXQvd8CQ2/86mp2ihtsz4DtGGg6FQyfkTrni6QeRF+HZYRQG87Hb+PV2CNGiABKHydnlnJLl5Fnd1JhOeaWD+d8NWEk2PHveOVWqhXHeKty7nrzeZa3t3CVPPUk+vOh369AtS1Pt7AkN+5e1yPm0sXZ6BD0Z3yIktT9D4yffMblRU3eL63lbZ/T7yZkuPygydg1VgB2sAmMY1YMyJ3FCImI6g0KVJYSdTsfK9/gowCklGY8igmQzpRosBe0dHPNIAszmA+xAVzxSjT+jjyn4oUU4CCSygA8lYln2dCxrZzURoewBlkZTDEgxJfLFOyNN9TEIZTYkiHsQCjEcRKuHAhpeOk8dfMhz/uNzCqs4nkdS+5iNBlVxcenXzeSc2DCIZx4B1/9PA3MWX8GipaZPP8hVsLYKOLl7AtLenYHKQc49fxPE/TVykNc2Uv9MkXvz+K/LidAX055sz0BtrFyTW7huFPqex6zzXgym4895rPW+W/FYiKq405Ec5mYV+1xeD0ultV/pGZ1lO1PMR3MOKQqz9+RuHgpUfjsVXhyd2WukiE/ndIyjwdTg/pg0WXFCsIkWFQEKxKGt3Od+vFZH3dRWCFnvsBMJUIGA0=
